const fixtures2 = [
  {
    fixtureid: 1,
    round: "Round 1",
    day: "Thursday",
    date: "20190314",
    home: "Storm",
    away: "Broncos",
    stadium: "AAMI Park",
    time: "1950",
    resulthome: "22",
    resultaway: "12"
  },
  {
    fixtureid: 2,
    round: "Round 1",
    day: "Friday",
    date: "20190315",
    home: "Knights",
    away: "Sharks",
    stadium: "McDonald Jones Stadium",
    time: "1800",
    resulthome: "14",
    resultaway: "8"
  },
  {
    fixtureid: 3,
    round: "Round 1",
    day: "Friday",
    date: "20190315",
    home: "Roosters",
    away: "Rabbitohs",
    stadium: "Sydney Cricket Ground",
    time: "1955",
    resulthome: "16",
    resultaway: "26"
  },
  {
    fixtureid: 4,
    round: "Round 1",
    day: "Saturday",
    date: "20190316",
    home: "Warriors",
    away: "Bulldogs",
    stadium: "Mt Smart Stadium",
    time: "1500",
    resulthome: "40",
    resultaway: "6"
  },
  {
    fixtureid: 5,
    round: "Round 1",
    day: "Saturday",
    date: "20190316",
    home: "Tigers",
    away: "Sea Eagles",
    stadium: "Leichhardt Oval",
    time: "1730",
    resulthome: "20",
    resultaway: "6"
  },
  {
    fixtureid: 6,
    round: "Round 1",
    day: "Saturday",
    date: "20190316",
    home: "Cowboys",
    away: "Dragons",
    stadium: "1300Smiles Stadium",
    time: "1935",
    resulthome: "24",
    resultaway: "12"
  },
  {
    fixtureid: 7,
    round: "Round 1",
    day: "Sunday",
    date: "20190317",
    home: "Panthers",
    away: "Eels",
    stadium: "Panthers Stadium",
    time: "1605",
    resulthome: "12",
    resultaway: "20"
  },
  {
    fixtureid: 8,
    round: "Round 1",
    day: "Sunday",
    date: "20190317",
    home: "Titans",
    away: "Raiders",
    stadium: "CBus Super Stadium",
    time: "1810",
    resulthome: "0",
    resultaway: "21"
  },
  {
    fixtureid: 9,
    round: "Round 2",
    day: "Thursday",
    date: "20190321",
    home: "Dragons",
    away: "Rabbitohs",
    stadium: "Jubilee Stadium",
    time: "1950",
    resulthome: "18",
    resultaway: "34"
  },
  {
    fixtureid: 10,
    round: "Round 2",
    day: "Friday",
    date: "20190322",
    home: "Raiders",
    away: "Storm",
    stadium: "GIO Stadium",
    time: "1800",
    resulthome: "10",
    resultaway: "22"
  },
  {
    fixtureid: 11,
    round: "Round 2",
    day: "Friday",
    date: "20190322",
    home: "Broncos",
    away: "Cowboys",
    stadium: "Suncorp Stadium",
    time: "1955",
    resulthome: "29",
    resultaway: "10"
  },
  {
    fixtureid: 12,
    round: "Round 2",
    day: "Saturday",
    date: "20190323",
    home: "Sharks",
    away: "Titans",
    stadium: "Shark Park",
    time: "1500",
    resulthome: "20",
    resultaway: "6"
  },
  {
    fixtureid: 13,
    round: "Round 2",
    day: "Saturday",
    date: "20190323",
    home: "Knights",
    away: "Panthers",
    stadium: "McDonald Jones Stadium",
    time: "1730",
    resulthome: "14",
    resultaway: "16"
  },
  {
    fixtureid: 14,
    round: "Round 2",
    day: "Saturday",
    date: "20190323",
    home: "Sea Eagles",
    away: "Roosters",
    stadium: "Lottoland",
    time: "1935",
    resulthome: "18",
    resultaway: "26"
  },
  {
    fixtureid: 15,
    round: "Round 2",
    day: "Sunday",
    date: "20190324",
    home: "Bulldogs",
    away: "Eels",
    stadium: "ANZ Stadium",
    time: "1605",
    resulthome: "16",
    resultaway: "36"
  },
  {
    fixtureid: 16,
    round: "Round 2",
    day: "Sunday",
    date: "20190324",
    home: "Tigers",
    away: "Warriors",
    stadium: "Campbelltown Stadium",
    time: "1810",
    resulthome: "34",
    resultaway: "6"
  },
  {
    fixtureid: 17,
    round: "Round 3",
    day: "Thursday",
    date: "20190328",
    home: "Broncos",
    away: "Dragons",
    stadium: "Suncorp Stadium",
    time: "1950",
    resulthome: "24",
    resultaway: "25"
  },
  {
    fixtureid: 18,
    round: "Round 3",
    day: "Friday",
    date: "20190329",
    home: "Raiders",
    away: "Knights",
    stadium: "GIO Stadium",
    time: "1800",
    resulthome: "17",
    resultaway: "10"
  },
  {
    fixtureid: 19,
    round: "Round 3",
    day: "Friday",
    date: "20190329",
    home: "Eels",
    away: "Roosters",
    stadium: "ANZ Stadium",
    time: "1955",
    resulthome: "18",
    resultaway: "32"
  },
  {
    fixtureid: 20,
    round: "Round 3",
    day: "Saturday",
    date: "20190330",
    home: "Sea Eagles",
    away: "Warriors",
    stadium: "AMI Stadium Christchurch",
    time: "1500",
    resulthome: "46",
    resultaway: "12"
  },
  {
    fixtureid: 21,
    round: "Round 3",
    day: "Saturday",
    date: "20190330",
    home: "Cowboys",
    away: "Sharks",
    stadium: "1300Smiles Stadium",
    time: "1730",
    resulthome: "16",
    resultaway: "42"
  },
  {
    fixtureid: 22,
    round: "Round 3",
    day: "Saturday",
    date: "20190330",
    home: "Panthers",
    away: "Storm",
    stadium: "Carrington Park Bathurst",
    time: "1935",
    resulthome: "2",
    resultaway: "32"
  },
  {
    fixtureid: 23,
    round: "Round 3",
    day: "Sunday",
    date: "20190331",
    home: "Tigers",
    away: "Bulldogs",
    stadium: "Campbelltown Stadium",
    time: "1605",
    resulthome: "8",
    resultaway: "22"
  },
  {
    fixtureid: 24,
    round: "Round 3",
    day: "Sunday",
    date: "20190331",
    home: "Rabbitohs",
    away: "Titans",
    stadium: "ANZ Stadium",
    time: "1810",
    resulthome: "28",
    resultaway: "20"
  },
  {
    fixtureid: 25,
    round: "Round 4",
    day: "Thursday",
    date: "20190404",
    home: "Roosters",
    away: "Broncos",
    stadium: "Sydney Cricket Ground",
    time: "1950",
    resulthome: "36",
    resultaway: "4"
  },
  {
    fixtureid: 26,
    round: "Round 4",
    day: "Friday",
    date: "20190405",
    home: "Warriors",
    away: "Titans",
    stadium: "Mt Smart Stadium",
    time: "1800",
    resulthome: "26",
    resultaway: "10"
  },
  {
    fixtureid: 27,
    round: "Round 4",
    day: "Friday",
    date: "20190405",
    home: "Panthers",
    away: "Tigers",
    stadium: "Panthers Stadium",
    time: "1955",
    resulthome: "9",
    resultaway: "8"
  },
  {
    fixtureid: 28,
    round: "Round 4",
    day: "Saturday",
    date: "20190406",
    home: "Sea Eagles",
    away: "Rabbitohs",
    stadium: "Lottoland",
    time: "1500",
    resulthome: "13",
    resultaway: "12"
  },
  {
    fixtureid: 29,
    round: "Round 4",
    day: "Saturday",
    date: "20190406",
    home: "Cowboys",
    away: "Raiders",
    stadium: "1300Smiles Stadium",
    time: "1730",
    resulthome: "12",
    resultaway: "30"
  },
  {
    fixtureid: 30,
    round: "Round 4",
    day: "Saturday",
    date: "20190406",
    home: "Eels",
    away: "Sharks",
    stadium: "ANZ Stadium",
    time: "1935",
    resulthome: "24",
    resultaway: "12"
  },
  {
    fixtureid: 31,
    round: "Round 4",
    day: "Sunday",
    date: "20190407",
    home: "Storm",
    away: "Bulldogs",
    stadium: "AAMI Park",
    time: "1605",
    resulthome: "18",
    resultaway: "16"
  },
  {
    fixtureid: 32,
    round: "Round 4",
    day: "Sunday",
    date: "20190407",
    home: "Knights",
    away: "Dragons",
    stadium: "McDonald Jones Stadium",
    time: "1810",
    resulthome: "12",
    resultaway: "13"
  },
  {
    fixtureid: 33,
    round: "Round 5",
    day: "Thursday",
    date: "20190411",
    home: "Broncos",
    away: "Tigers",
    stadium: "Suncorp Stadium",
    time: "1950",
    resulthome: "16",
    resultaway: "22"
  },
  {
    fixtureid: 34,
    round: "Round 5",
    day: "Friday",
    date: "20190412",
    home: "Titans",
    away: "Panthers",
    stadium: "CBus Super Stadium",
    time: "1800",
    resulthome: "30",
    resultaway: "24"
  },
  {
    fixtureid: 35,
    round: "Round 5",
    day: "Friday",
    date: "20190412",
    home: "Cowboys",
    away: "Storm",
    stadium: "1300Smiles Stadium",
    time: "1955",
    resulthome: "12",
    resultaway: "18"
  },
  {
    fixtureid: 36,
    round: "Round 5",
    day: "Saturday",
    date: "20190413",
    home: "Rabbitohs",
    away: "Warriors",
    stadium: "Sunshine Coast Stadium",
    time: "1500",
    resulthome: "28",
    resultaway: "24"
  },
  {
    fixtureid: 37,
    round: "Round 5",
    day: "Saturday",
    date: "20190413",
    home: "Knights",
    away: "Sea Eagles",
    stadium: "McDonald Jones Stadium",
    time: "1730",
    resulthome: "18",
    resultaway: "26"
  },
  {
    fixtureid: 38,
    round: "Round 5",
    day: "Saturday",
    date: "20190413",
    home: "Sharks",
    away: "Roosters",
    stadium: "Shark Park",
    time: "1935",
    resulthome: "16",
    resultaway: "30"
  },
  {
    fixtureid: 39,
    round: "Round 5",
    day: "Sunday",
    date: "20190414",
    home: "Dragons",
    away: "Bulldogs",
    stadium: "Jubilee Stadium",
    time: "1605",
    resulthome: "40",
    resultaway: "4"
  },
  {
    fixtureid: 40,
    round: "Round 5",
    day: "Sunday",
    date: "20190414",
    home: "Raiders",
    away: "Eels",
    stadium: "GIO Stadium",
    time: "1810",
    resulthome: "19",
    resultaway: "0"
  }
];

// Arrays
let allNames = [];
let teamNames = [];
let leagueTable = [];

// Collect all team names
for (let i = 0; i < fixtures2.length; i++) {
  allNames.push(fixtures2[i].home);
  allNames.push(fixtures2[i].away);
}

// Remove duplicate names
for (let i = 0; i < allNames.length; i++) {
  if (teamNames.indexOf(allNames[i]) === -1) {
    teamNames.push(allNames[i]);
  }
}
console.log(teamNames);

// Create League Table
teamNames.forEach(name => {
  let teamScore = {
    name: name,
    wins: 0,
    losses: 0,
    homePointsScored: 0,
    homePointsConceded: 0,
    awayPointsScored: 0,
    awayPointsConceded: 0,
    points: 0
  };
  leagueTable.push(teamScore);
});

fixtures2.forEach(fixture => {
  let homeTeam = leagueTable.find(team => team.name === fixture.home);
  let awayTeam = leagueTable.find(team => team.name === fixture.away);

  homeTeam.homePointsScored += +fixture.resulthome;
  homeTeam.homePointsConceded += +fixture.resultaway;
  awayTeam.awayPointsScored += +fixture.resultaway;
  awayTeam.awayPointsConceded += +fixture.resulthome;

  if (parseInt(fixture.resulthome) > parseInt(fixture.resultaway)) {
    homeTeam.wins += 1;
    homeTeam.points += 2;
    awayTeam.losses += 1;
  }
  if (parseInt(fixture.resultaway) > parseInt(fixture.resulthome)) {
    awayTeam.wins += 1;
    awayTeam.points += 2;
    homeTeam.losses += 1;
  }
});

// Sort league table by points
leagueTable.sort((a, b) => {
  let x = a.points;
  let y = b.points;
  if (x < y) {
    return 1;
  }
  if (y < x) {
    return -1;
  }
});
console.log(leagueTable);

// Create league table
let tableHTML = "<table class='table table-sm'>";

tableHTML +=
  "<thead><tr><th scope='col'>#</th><th scope='col'>Team</th><th scope='col'>W</th><th scope='col'>L</th><th scope='col'>PF</th><th scope='col'>PA</th><th scope='col'>PD</th><th scope='col'>Pts</th></tr></thead><tbody>";

for (let i = 0; i < leagueTable.length; i++) {
  tableHTML +=
    "<tr><td>" +
    (i + 1) +
    "</td><td>" +
    leagueTable[i].name +
    "</td><td>" +
    leagueTable[i].wins +
    "</td><td>" +
    leagueTable[i].losses +
    "</td><td>" +
    (leagueTable[i].homePointsScored + leagueTable[i].awayPointsScored) +
    "</td><td>" +
    (leagueTable[i].homePointsConceded + leagueTable[i].awayPointsConceded) +
    "</td><td>" +
    (leagueTable[i].homePointsScored +
      leagueTable[i].awayPointsScored -
      (leagueTable[i].homePointsConceded + leagueTable[i].awayPointsConceded)) +
    "</td><td>" +
    leagueTable[i].points +
    "</td></tr>";
}
tableHTML += "</tbody></table>";

document.getElementById("league-table").innerHTML = tableHTML;
